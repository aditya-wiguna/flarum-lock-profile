(()=>{var e={n:o=>{var t=o&&o.__esModule?()=>o.default:()=>o;return e.d(t,{a:t}),t},d:(o,t)=>{for(var r in t)e.o(t,r)&&!e.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:t[r]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o)};(()=>{"use strict";const o=flarum.core.compat["forum/app"];var t=e.n(o);const r=flarum.core.compat["common/extend"],n=(flarum.core.compat["forum/components/UserPage"],flarum.core.compat["forum/components/SettingsPage"]);var i=e.n(n);const a=flarum.core.compat["forum/components/ChangeEmailModal"];var l=e.n(a);flarum.core.compat["forum/components/ChangePasswordModal"];const s=flarum.core.compat["forum/components/UserCard"];var c=e.n(s);const u=flarum.core.compat["common/components/AvatarEditor"];var d=e.n(u);t().initializers.add("yourvendor/flarum-lock-profile",function(){var e=function(){return t().session.user&&t().session.user.isAdmin()};(0,r.extend)(c().prototype,"infoItems",function(o){var r;!e()&&this.attrs.user&&this.attrs.user.id()===(null==(r=t().session.user)?void 0:r.id())&&o.remove("edit")}),(0,r.extend)(i().prototype,"settingsItems",function(o){!e()&&o.has("account")&&(o.get("account"),(0,r.extend)(i().prototype,"oncreate",function(){var e=this;setTimeout(function(){e.disableProfileFields()},50)}))}),i().prototype.disableProfileFields=function(){if(!e()){var o=document.querySelector('input[name="username"]');o&&(o.disabled=!0,o.style.opacity="0.6",o.style.cursor="not-allowed",o.title="Profile editing is locked");var t=document.querySelector('input[name="email"]');t&&(t.disabled=!0,t.style.opacity="0.6",t.style.cursor="not-allowed",t.title="Profile editing is locked");var r=document.querySelector('textarea[name="bio"]');r&&(r.disabled=!0,r.style.opacity="0.6",r.style.cursor="not-allowed",r.title="Profile editing is locked"),document.querySelectorAll('.Button--changeEmail, button[onclick*="email"]').forEach(function(e){e.style.display="none"}),document.querySelectorAll(".AvatarEditor").forEach(function(e){e.style.opacity="0.6",e.style.pointerEvents="none",e.style.cursor="not-allowed",e.title="Profile editing is locked"}),document.querySelectorAll('.SettingsPage .Button--primary[type="submit"]').forEach(function(e){e.textContent.includes("Save")&&(e.disabled=!0,e.style.opacity="0.6",e.style.cursor="not-allowed")})}},(0,r.override)(d().prototype,"view",function(o){var r;return!e()&&this.attrs.user&&this.attrs.user.id()===(null==(r=t().session.user)?void 0:r.id())?m(".AvatarEditor",{style:"opacity: 0.6; pointer-events: none; cursor: not-allowed;",title:"Profile editing is locked"},o()):o()}),(0,r.override)(l().prototype,"oninit",function(o,r){return e()?o(r):(t().modal.close(),void t().alerts.show({type:"error"},t().translator.trans("yourvendor-lock-profile.forum.profile_locked")))}),(0,r.extend)(i().prototype,"onsubmit",function(o){e()||(o.preventDefault(),t().alerts.show({type:"error"},t().translator.trans("yourvendor-lock-profile.forum.profile_locked")))})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map