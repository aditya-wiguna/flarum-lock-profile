(()=>{var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};(()=>{"use strict";const t=flarum.core.compat["forum/app"];var o=e.n(t);const r=flarum.core.compat["common/extend"],n=(flarum.core.compat["forum/components/UserPage"],flarum.core.compat["forum/components/SettingsPage"]);var a=e.n(n);const l=flarum.core.compat["forum/components/ChangeEmailModal"];var i=e.n(l);flarum.core.compat["forum/components/ChangePasswordModal"];const c=flarum.core.compat["forum/components/UserCard"];var s=e.n(c);const u=flarum.core.compat["common/components/AvatarEditor"];var d=e.n(u);o().initializers.add("aditya-wiguna/flarum-lock-profile",function(){(0,r.extend)(s().prototype,"infoItems",function(e){var t;this.attrs.user&&this.attrs.user.id()===(null==(t=o().session.user)?void 0:t.id())&&e.remove("edit"),e.has("controls")&&e.remove("controls")}),(0,r.extend)(s().prototype,"oncreate",function(){setTimeout(function(){document.querySelectorAll('.Dropdown-toggle[aria-label*="controls"], .Dropdown-toggle[data-toggle="dropdown"]').forEach(function(e){(e.textContent.includes("Controls")||e.querySelector(".fa-ellipsis-v"))&&(e.style.display="none")})},50)}),(0,r.extend)(a().prototype,"settingsItems",function(e){e.has("account")&&(e.get("account"),(0,r.extend)(a().prototype,"oncreate",function(){var e=this;setTimeout(function(){e.disableProfileFields()},50)}))}),a().prototype.disableProfileFields=function(){var e=document.querySelector('input[name="username"]');e&&(e.disabled=!0,e.style.opacity="0.6",e.style.cursor="not-allowed",e.title="Username editing is locked by administrator");var t=document.querySelector('input[name="email"]');t&&(t.disabled=!0,t.style.opacity="0.6",t.style.cursor="not-allowed",t.title="Email editing is locked by administrator");var o=document.querySelector('textarea[name="bio"]');o&&(o.disabled=!0,o.style.opacity="0.6",o.style.cursor="not-allowed",o.title="Profile editing is locked");var r=document.querySelector(".Settings-account");r&&(r.style.display="none"),document.querySelectorAll('.Button--changeEmail, .item-changeEmail, .item-changePassword, button[onclick*="email"]').forEach(function(e){e.style.display="none"}),document.querySelectorAll(".AvatarEditor").forEach(function(e){e.style.opacity="0.6",e.style.pointerEvents="none",e.style.cursor="not-allowed",e.title="Profile editing is locked"}),document.querySelectorAll('.SettingsPage .Button--primary[type="submit"]').forEach(function(e){e.textContent.includes("Save")&&(e.disabled=!0,e.style.opacity="0.6",e.style.cursor="not-allowed")})},(0,r.override)(d().prototype,"view",function(e){return m(".AvatarEditor",{style:"opacity: 0.6; pointer-events: none; cursor: not-allowed;",title:"Profile editing is locked"},e())}),(0,r.override)(i().prototype,"oninit",function(e,t){o().modal.close(),o().alerts.show({type:"error"},o().translator.trans("aditya-wiguna-lock-profile.forum.profile_locked"))}),(0,r.extend)(a().prototype,"onsubmit",function(e){e.preventDefault(),o().alerts.show({type:"error"},"Username and email cannot be changed.")})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map